{% extends 'base.html' %}
{% load staticfiles %}

{% block title_block %}
    查看购物车
{% endblock %}

{% block body_block %}
<div class='container'>
    <br>
    <div class='row'>
        <div class='col-sm-12'>
            <div class='panel panel-info'>
                <div class='panel panel-heading'>
                    <h4>我的购物车</h4>
                </div>
                <div class='panel panel-body'>
                    {% for item in goods %}
                    {% if forloop.first %}
                    <table border=1>
                        <tr>
                            <td width=300 align=center>产品名称</td>
                            <td width=100 align=center>单价</td>
                            <td width=100 align=center>数量</td>
                            <td width=100 align=center>小计</td>
                            <td width=100 align=center>删除</td>
                        </tr>
                    {% endif %}
                        <div class='listgroup'>
                            <div class='listgroup-item'>
                                <tr>
                                    <td><a href="{% url 'show_book' item.id %}" >{{ item.name }}</a></td>
                                    <td align=right>{{ item.price }}</td>
                                    <td align=center>{{ item.count }}</td>
                                    <td align=right>{{ item.total }}</td>
                                    <td align=center>
                                        <button id='cart_delete' class='btn btn-warning' data-id='{{ item.id }}'>删除</button>
                                    </td>
                                </tr>
                            </div>
                        </div>
                    {% if forloop.last %}
                    </table>
                    <div class='panel panel-footer'>
                        <p>总计：{{ summary }}</p>
                        <button class='btn btn-warning'><a href='{% url "settle_cart" %}'>结算</a></button>
                    </div>
                    {% endif %}
                    {% empty %}
                        <em>购物车是空的 </em>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}